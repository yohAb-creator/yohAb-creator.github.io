(()=>{document.addEventListener("DOMContentLoaded",()=>{let u=document.querySelector("[data-publications]"),n=document.querySelector("[data-publications-filter]"),c=u?.querySelectorAll("[data-publication-card]")??[],e=document.querySelector("[data-modal]"),d=e?.querySelector("[data-modal-title]"),s=e?.querySelector("[data-modal-content]"),f=e?.querySelectorAll("[data-modal-close]")??[],m=e?.querySelector(".abstract-modal__dialog");n&&c.length>0&&n.addEventListener("click",t=>{let a=t.target;if(!(a instanceof HTMLButtonElement))return;let o=a.dataset.filter;o&&(n.querySelectorAll(".filter-bar__btn").forEach(l=>{l.classList.toggle("is-active",l===a)}),c.forEach(l=>{let S=(l.dataset.tags??"").split(",").map(g=>g.trim()).filter(Boolean),i=o==="all"||S.includes(o);l.toggleAttribute("hidden",!i),l.setAttribute("aria-hidden",i?"false":"true")}))});let y=document.querySelectorAll("[data-abstract]"),b=(t,a)=>{if(!e||!d||!s)return;d.textContent=t,s.textContent=a,e.removeAttribute("hidden"),document.body.style.overflow="hidden";let o=e.querySelector("[data-modal-close]")||m;o&&o.focus({preventScroll:!0})},r=()=>{e&&(e.setAttribute("hidden",""),document.body.style.overflow="")};y.forEach(t=>{t.addEventListener("click",()=>{let{title:a="",abstract:o=""}=t.dataset;b(a,o)})}),f.forEach(t=>{t.addEventListener("click",r)}),e?.addEventListener("click",t=>{(t.target===e||t.target===e.querySelector("[data-modal-close]"))&&r()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&r()})});})();
